@* Views/Shared/_CookieConsentPartial.cshtml *@
@using Microsoft.AspNetCore.Identity
@inject SignInManager<ProjektSezon2.Models.ApplicationUser> SignInManager

@{
    // Only show banner if user is authenticated
    if (!SignInManager.IsSignedIn(User))
    {
        <text><!-- not signed in: no consent banner --></text>
        ;
        return;
    }

    // Only show if no consent cookie yet
    var consentCookie = Context.Request.Cookies["UserCookieConsent"];
    if (!string.IsNullOrEmpty(consentCookie))
    {
        <text><!-- consent already given: hide banner --></text>
        ;
        return;
    }
}

<div id="cookie-consent-banner" class="alert alert-light border-top fixed-bottom mb-0">
    <div class="container d-flex align-items-center justify-content-between">
        <div>
            <strong>Cookie Preferences</strong><br />
            <small>We use cookies for functionality, analytics, and marketing. Manage your preferences:</small>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="cc-functional" checked disabled>
                <label class="form-check-label" for="cc-functional">Functional (required)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="cc-analytics">
                <label class="form-check-label" for="cc-analytics">Analytics</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="cc-marketing">
                <label class="form-check-label" for="cc-marketing">Marketing</label>
            </div>
        </div>
        <button id="cc-save-btn" class="btn btn-primary">Save Preferences</button>
    </div>
</div>
